# ===== APPLICATION CONFIGURATION =====
spring:
  application:
    name: English Vocab

  # ===== DATABASE CONFIGURATION =====
  datasource:
    url: jdbc:postgresql://localhost:5432/EnglishVocab
    username: postgres
    password: admin
    driver-class-name: org.postgresql.Driver

  # ===== JPA/HIBERNATE CONFIGURATION =====
  jpa:
    database: POSTGRESQL
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        '[format_sql]': true
        jdbc:
          lob:
            '[non_contextual_creation]': true

  # ===== THYMELEAF CONFIGURATION =====
  thymeleaf:
    cache: false
    enabled: true
    prefix: classpath:/templates/
    suffix: .html
    mode: HTML
    encoding: UTF-8

  # ===== SECURITY CONFIGURATION =====
  # Note: Admin user sẽ được tạo tự động trong database bởi DataInitializer
  # Không cần cấu hình in-memory user nữa
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            scope: openid,profile,email
            redirect-uri: '{baseUrl}/login/oauth2/code/{registrationId}'
        provider:
          google:
            authorization-uri: https://accounts.google.com/o/oauth2/auth
            token-uri: https://oauth2.googleapis.com/token
            user-info-uri: https://www.googleapis.com/oauth2/v3/userinfo
            user-name-attribute: sub

  # ===== DEV TOOLS =====
  devtools:
    restart:
      enabled: true
    livereload:
      enabled: true

  # ===== VALIDATION MESSAGES =====
  messages:
    basename: messages
    encoding: UTF-8

# ===== SERVER CONFIGURATION =====
server:
  port: 8080
  servlet:
    session:
      timeout: 30m

# ===== LOGGING CONFIGURATION =====
logging:
  level:
    '[com.englishvocab]': DEBUG
    '[org.springframework.security]': DEBUG
    '[org.springframework.web]': INFO
    '[org.hibernate.SQL]': DEBUG
    '[org.hibernate.type.descriptor.sql.BasicBinder]': TRACE
  file:
    name: logs/englishvocab.log
    '[max-size]': 10MB
    '[max-history]': 30
